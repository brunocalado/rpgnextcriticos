{"name":"Rolar Erro Crítico","type":"script","author":"Ol2t8tYZADY5EZKq","img":"modules/rpgnextcriticos/images/icons/nok.svg","scope":"global","command":"//const tableName = 'Acerto Crítico';\nconst tableName = 'Erro Crítico';\nconst peculiaridades = await drawFromTable(tableName);\n\n\nasync function drawFromTable(tableName) {\n\n  let list_compendium = await game.packs.filter(p=>p.documentName=='RollTable');      \n  let inside = await list_compendium.filter( p=>p.metadata.label=='RPG Next - Tabelas' )[0].getDocuments();      \n  const table = await inside.filter( p=>p.name==tableName )[0];          \n  \n  if (!table) {\n    ui.notifications.warn(`Table ${tableName} not found.`, {});\n    return;\n  }\n  const output = await table.roll();\n  const result = output.results[0].data.img;\n  await ChatMessage.create({content: `<img src=\"${result}\">`});\n  //await table.draw({flavor:\"\"}); // joga no chat, mas tem que comentar abaixo\n\n  \n  const popout = new ImagePopout(result).render(true);\n  popout.shareImage();\n}","folder":null,"sort":0,"permission":{"default":0,"Ol2t8tYZADY5EZKq":3},"flags":{"core":{"sourceId":"Macro.x6TLTSN9QpfAdSQh"}},"_id":"KeVqPuWyzyNc7HTV"}
{"name":"Rolar Acerto Crítico","type":"script","author":"Ol2t8tYZADY5EZKq","img":"modules/rpgnextcriticos/images/icons/ok.svg","scope":"global","command":"const tableName = 'Acerto Crítico';\n//const tableName = 'Erro Crítico';\nconst peculiaridades = await drawFromTable(tableName);\n\n\nasync function drawFromTable(tableName) {\n\n  let list_compendium = await game.packs.filter(p=>p.documentName=='RollTable');      \n  let inside = await list_compendium.filter( p=>p.metadata.label=='RPG Next - Tabelas' )[0].getDocuments();      \n  const table = await inside.filter( p=>p.name==tableName )[0];          \n  \n  if (!table) {\n    ui.notifications.warn(`Table ${tableName} not found.`, {});\n    return;\n  }\n  const output = await table.roll();\n  const result = output.results[0].data.img;\n  await ChatMessage.create({content: `<img src=\"${result}\">`});\n  //await table.draw({flavor:\"\"}); // joga no chat, mas tem que comentar abaixo\n\n  \n  const popout = new ImagePopout(result).render(true);\n  popout.shareImage();\n}","folder":null,"sort":0,"permission":{"default":0,"Ol2t8tYZADY5EZKq":3},"flags":{"core":{"sourceId":"Macro.O6viqS0xzNwe5APo"}},"_id":"vQpQ3TRiQ3Zo14Jv"}
